{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminDashboard(){const navigate=useNavigate();const[admins,setAdmins]=useState([]);const[form,setForm]=useState({email:'',password:''});const token=localStorage.getItem('token');const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('isAdmin');navigate('/');// Redirect to home page after logout\n};const fetchAdmins=async()=>{try{const res=await axios.get('http://localhost:3000/api/admins',{headers:{Authorization:`Bearer ${token}`}});setAdmins(res.data);}catch(err){console.error('Error fetching admins:',err);setAdmins([]);}};useEffect(()=>{fetchAdmins();// eslint-disable-next-line\n},[]);const handleInputChange=e=>{const{name,value}=e.target;setForm(prev=>({...prev,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{await axios.post('http://localhost:3000/api/admins',form,{headers:{Authorization:`Bearer ${token}`}});setForm({email:'',password:''});fetchAdmins();}catch(err){console.error('Error adding admin:',err);}};// Add this function to navigate to the change password page\nconst handleChangePassword=()=>{navigate('/admin/change-password');};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-yellow-50 to-green-100 py-10 px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto bg-white rounded-lg shadow-lg p-8 border-t-8 border-green-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center md:justify-between mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-green-900 mb-2\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Manage the Ghana National Online Voting System\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleChangePassword,className:\"bg-gray-700 hover:bg-gray-800 text-white font-semibold px-6 py-2 rounded shadow\",children:\"Change Password\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-2 rounded shadow\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/candidates'),className:\"bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-4 rounded-lg shadow text-lg transition\",children:\"Manage Candidates\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/results'),className:\"bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-lg shadow text-lg transition\",children:\"View Results\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-green-800 mb-4\",children:\"Add New Admin\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:form.email,onChange:handleInputChange,placeholder:\"Admin Email\",className:\"border p-3 rounded focus:outline-none focus:ring-2 focus:ring-green-400\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:form.password,onChange:handleInputChange,placeholder:\"Admin Password\",className:\"border p-3 rounded focus:outline-none focus:ring-2 focus:ring-green-400\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-700 hover:bg-blue-800 text-white font-semibold px-4 py-2 rounded shadow\",children:\"Add Admin\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-3\",children:\"Current Admins\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:Array.isArray(admins)&&admins.map(admin=>/*#__PURE__*/_jsx(\"li\",{className:\"flex items-center justify-between border p-3 rounded bg-gray-50\",children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-green-900\",children:admin.email}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs text-gray-500\",children:[\"(\",admin.role,\")\"]})]})},admin._id))})]})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"mt-10 text-center text-gray-500 text-sm\",children:[\"\\xA9 \",new Date().getFullYear(),\" Ghana Electoral Commission. All rights reserved.\"]})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","AdminDashboard","navigate","admins","setAdmins","form","setForm","email","password","token","localStorage","getItem","handleLogout","removeItem","fetchAdmins","res","get","headers","Authorization","data","err","console","error","handleInputChange","e","name","value","target","prev","handleSubmit","preventDefault","post","handleChangePassword","className","children","onClick","onSubmit","type","onChange","placeholder","required","Array","isArray","map","admin","role","_id","Date","getFullYear"],"sources":["C:/Users/user/Desktop/Chain Choice/Chain Choice/voting frontend/src/pages/AdminDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nexport default function AdminDashboard() {\n  const navigate = useNavigate();\n  const [admins, setAdmins] = useState([]);\n  const [form, setForm] = useState({\n    email: '',\n    password: '',\n  });\n\n  const token = localStorage.getItem('token');\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('isAdmin');\n    navigate('/'); // Redirect to home page after logout\n  };\n\n  const fetchAdmins = async () => {\n    try {\n      const res = await axios.get('http://localhost:3000/api/admins', {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setAdmins(res.data);\n    } catch (err) {\n      console.error('Error fetching admins:', err);\n      setAdmins([]);\n    }\n  };\n\n  useEffect(() => {\n    fetchAdmins();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setForm((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      await axios.post('http://localhost:3000/api/admins', form, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setForm({ email: '', password: '' });\n      fetchAdmins();\n    } catch (err) {\n      console.error('Error adding admin:', err);\n    }\n  };\n\n  // Add this function to navigate to the change password page\n  const handleChangePassword = () => {\n    navigate('/admin/change-password');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-yellow-50 to-green-100 py-10 px-4\">\n      <div className=\"max-w-3xl mx-auto bg-white rounded-lg shadow-lg p-8 border-t-8 border-green-700\">\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between mb-8\">\n          <div>\n            <h2 className=\"text-3xl font-extrabold text-green-900 mb-2\">Admin Dashboard</h2>\n            <p className=\"text-gray-600\">Manage the Ghana National Online Voting System</p>\n          </div>\n          <div className=\"flex flex-col md:flex-row md:items-center gap-2\">\n            <button\n              onClick={handleChangePassword}\n              className=\"bg-gray-700 hover:bg-gray-800 text-white font-semibold px-6 py-2 rounded shadow\"\n            >\n              Change Password\n            </button>\n            <button\n              onClick={handleLogout}\n              className=\"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-2 rounded shadow\"\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10\">\n          <button\n            onClick={() => navigate('/candidates')}\n            className=\"bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-4 rounded-lg shadow text-lg transition\"\n          >\n            Manage Candidates\n          </button>\n          <button\n            onClick={() => navigate('/results')}\n            className=\"bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-lg shadow text-lg transition\"\n          >\n            View Results\n          </button>\n        </div>\n\n        <div className=\"border-t pt-8\">\n          <h3 className=\"text-2xl font-bold text-green-800 mb-4\">Add New Admin</h3>\n          <form onSubmit={handleSubmit} className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={form.email}\n              onChange={handleInputChange}\n              placeholder=\"Admin Email\"\n              className=\"border p-3 rounded focus:outline-none focus:ring-2 focus:ring-green-400\"\n              required\n            />\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={form.password}\n              onChange={handleInputChange}\n              placeholder=\"Admin Password\"\n              className=\"border p-3 rounded focus:outline-none focus:ring-2 focus:ring-green-400\"\n              required\n            />\n            <button\n              type=\"submit\"\n              className=\"bg-blue-700 hover:bg-blue-800 text-white font-semibold px-4 py-2 rounded shadow\"\n            >\n              Add Admin\n            </button>\n          </form>\n\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">Current Admins</h3>\n          <ul className=\"space-y-2\">\n            {Array.isArray(admins) && admins.map((admin) => (\n              <li\n                key={admin._id}\n                className=\"flex items-center justify-between border p-3 rounded bg-gray-50\"\n              >\n                <span>\n                  <strong className=\"text-green-900\">{admin.email}</strong>\n                  <span className=\"ml-2 text-xs text-gray-500\">({admin.role})</span>\n                </span>\n                {/* Optionally, add a remove button here */}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n            <footer className=\"mt-10 text-center text-gray-500 text-sm\">\n              &copy; {new Date().getFullYear()} Ghana Electoral Commission. All rights reserved.\n            </footer>\n          </div>\n        );\n      }"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,cAAe,SAAS,CAAAC,cAAcA,CAAA,CAAG,CACvC,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACQ,MAAM,CAAEC,SAAS,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACY,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,CAC/Bc,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACZ,CAAC,CAAC,CAEF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBF,YAAY,CAACG,UAAU,CAAC,OAAO,CAAC,CAChCH,YAAY,CAACG,UAAU,CAAC,SAAS,CAAC,CAClCX,QAAQ,CAAC,GAAG,CAAC,CAAE;AACjB,CAAC,CAED,KAAM,CAAAY,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAnB,KAAK,CAACoB,GAAG,CAAC,kCAAkC,CAAE,CAC9DC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUT,KAAK,EAAG,CAC9C,CAAC,CAAC,CACFL,SAAS,CAACW,GAAG,CAACI,IAAI,CAAC,CACrB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAEF,GAAG,CAAC,CAC5ChB,SAAS,CAAC,EAAE,CAAC,CACf,CACF,CAAC,CAEDV,SAAS,CAAC,IAAM,CACdoB,WAAW,CAAC,CAAC,CACb;AACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAS,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChCrB,OAAO,CAAEsB,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAE,CAACH,IAAI,EAAGC,KAAM,CAAC,CAAC,CAAC,CACjD,CAAC,CAED,KAAM,CAAAG,YAAY,CAAG,KAAO,CAAAL,CAAC,EAAK,CAChCA,CAAC,CAACM,cAAc,CAAC,CAAC,CAClB,GAAI,CACF,KAAM,CAAAlC,KAAK,CAACmC,IAAI,CAAC,kCAAkC,CAAE1B,IAAI,CAAE,CACzDY,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUT,KAAK,EAAG,CAC9C,CAAC,CAAC,CACFH,OAAO,CAAC,CAAEC,KAAK,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CACpCM,WAAW,CAAC,CAAC,CACf,CAAE,MAAOM,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,qBAAqB,CAAEF,GAAG,CAAC,CAC3C,CACF,CAAC,CAED;AACA,KAAM,CAAAY,oBAAoB,CAAGA,CAAA,GAAM,CACjC9B,QAAQ,CAAC,wBAAwB,CAAC,CACpC,CAAC,CAED,mBACEF,KAAA,QAAKiC,SAAS,CAAC,uEAAuE,CAAAC,QAAA,eACpFlC,KAAA,QAAKiC,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAC9FlC,KAAA,QAAKiC,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAChFlC,KAAA,QAAAkC,QAAA,eACEpC,IAAA,OAAImC,SAAS,CAAC,6CAA6C,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cAChFpC,IAAA,MAAGmC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,gDAA8C,CAAG,CAAC,EAC5E,CAAC,cACNlC,KAAA,QAAKiC,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9DpC,IAAA,WACEqC,OAAO,CAAEH,oBAAqB,CAC9BC,SAAS,CAAC,iFAAiF,CAAAC,QAAA,CAC5F,iBAED,CAAQ,CAAC,cACTpC,IAAA,WACEqC,OAAO,CAAEvB,YAAa,CACtBqB,SAAS,CAAC,+EAA+E,CAAAC,QAAA,CAC1F,QAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cAENlC,KAAA,QAAKiC,SAAS,CAAC,6CAA6C,CAAAC,QAAA,eAC1DpC,IAAA,WACEqC,OAAO,CAAEA,CAAA,GAAMjC,QAAQ,CAAC,aAAa,CAAE,CACvC+B,SAAS,CAAC,kGAAkG,CAAAC,QAAA,CAC7G,mBAED,CAAQ,CAAC,cACTpC,IAAA,WACEqC,OAAO,CAAEA,CAAA,GAAMjC,QAAQ,CAAC,UAAU,CAAE,CACpC+B,SAAS,CAAC,gGAAgG,CAAAC,QAAA,CAC3G,cAED,CAAQ,CAAC,EACN,CAAC,cAENlC,KAAA,QAAKiC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BpC,IAAA,OAAImC,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cACzElC,KAAA,SAAMoC,QAAQ,CAAEP,YAAa,CAACI,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eAClFpC,IAAA,UACEuC,IAAI,CAAC,OAAO,CACZZ,IAAI,CAAC,OAAO,CACZC,KAAK,CAAErB,IAAI,CAACE,KAAM,CAClB+B,QAAQ,CAAEf,iBAAkB,CAC5BgB,WAAW,CAAC,aAAa,CACzBN,SAAS,CAAC,yEAAyE,CACnFO,QAAQ,MACT,CAAC,cACF1C,IAAA,UACEuC,IAAI,CAAC,UAAU,CACfZ,IAAI,CAAC,UAAU,CACfC,KAAK,CAAErB,IAAI,CAACG,QAAS,CACrB8B,QAAQ,CAAEf,iBAAkB,CAC5BgB,WAAW,CAAC,gBAAgB,CAC5BN,SAAS,CAAC,yEAAyE,CACnFO,QAAQ,MACT,CAAC,cACF1C,IAAA,WACEuC,IAAI,CAAC,QAAQ,CACbJ,SAAS,CAAC,iFAAiF,CAAAC,QAAA,CAC5F,WAED,CAAQ,CAAC,EACL,CAAC,cAEPpC,IAAA,OAAImC,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,cAC5EpC,IAAA,OAAImC,SAAS,CAAC,WAAW,CAAAC,QAAA,CACtBO,KAAK,CAACC,OAAO,CAACvC,MAAM,CAAC,EAAIA,MAAM,CAACwC,GAAG,CAAEC,KAAK,eACzC9C,IAAA,OAEEmC,SAAS,CAAC,iEAAiE,CAAAC,QAAA,cAE3ElC,KAAA,SAAAkC,QAAA,eACEpC,IAAA,WAAQmC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAEU,KAAK,CAACrC,KAAK,CAAS,CAAC,cACzDP,KAAA,SAAMiC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAC,GAAC,CAACU,KAAK,CAACC,IAAI,CAAC,GAAC,EAAM,CAAC,EAC9D,CAAC,EANFD,KAAK,CAACE,GAQT,CACL,CAAC,CACA,CAAC,EACF,CAAC,EACH,CAAC,cACA9C,KAAA,WAAQiC,SAAS,CAAC,yCAAyC,CAAAC,QAAA,EAAC,OACnD,CAAC,GAAI,CAAAa,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC,mDACnC,EAAQ,CAAC,EACN,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
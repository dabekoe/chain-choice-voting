{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import api from'../api/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function VoterDashboard(){const[elections,setElections]=useState([]);const[voteStatus,setVoteStatus]=useState({presidential:false,parliamentary:[]});const[error,setError]=useState('');const navigate=useNavigate();useEffect(()=>{const fetchElections=async()=>{try{const res=await api.get('/api/votes/elections',{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setElections(Array.isArray(res.data.elections)?res.data.elections:[]);}catch(err){console.error('Error fetching elections:',err);setError('Failed to load elections');}};const fetchVoteStatus=async()=>{try{const res=await api.get('/api/votes/status',{headers:{Authorization:`Bearer ${localStorage.getItem('token')}`}});setVoteStatus(res.data);}catch(err){setVoteStatus({presidential:false,parliamentary:[]});}};fetchElections();fetchVoteStatus();},[]);const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('isAdmin');navigate('/');// Redirect to home page after logout\n};const handleVoteClick=function(type){let constituency=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(type==='presidential'){navigate('/vote/presidential');}else{navigate(`/vote/parliamentary/${constituency}`);}};// Filter to show only one Parliamentary Election card\nconst uniqueElections=[];const seenTypes=new Set();for(const election of elections){const key=election.type==='parliamentary'?'parliamentary':election.type;if(!seenTypes.has(key)){uniqueElections.push(election);seenTypes.add(key);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 flex flex-col items-center py-10 px-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:justify-between md:items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-blue-900 mb-1\",children:\"Welcome, Voter\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"Your secure voting dashboard\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"mt-4 md:mt-0 bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-semibold shadow transition\",children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Available Elections\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:error}),uniqueElections.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500 text-center py-12\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto mb-2\",width:\"48\",height:\"48\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"#a0aec0\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"})}),\"No elections available at the moment.\"]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-5\",children:uniqueElections.map((election,i)=>{let voted=false;if(election.type==='presidential'){voted=voteStatus.presidential;}else if(election.type==='parliamentary'){voted=voteStatus.parliamentary&&voteStatus.parliamentary.length>0;}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row md:justify-between md:items-center border rounded-xl shadow-sm p-5 bg-gradient-to-r from-blue-50 to-indigo-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-2 md:mb-0\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-lg text-blue-800\",children:election.type==='presidential'?'Presidential Election':'Parliamentary Election'})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVoteClick(election.type,election.constituency),className:`px-6 py-2 rounded-lg font-bold shadow transition ${voted?'bg-gray-400 cursor-not-allowed':'bg-blue-600 hover:bg-indigo-700 text-white'}`,disabled:voted,children:voted?'Voted':'Vote'})]},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 text-center text-gray-400 text-xs\",children:[\"\\xA9 \",new Date().getFullYear(),\" National Online Voting System. All rights reserved.\"]})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","api","jsx","_jsx","jsxs","_jsxs","VoterDashboard","elections","setElections","voteStatus","setVoteStatus","presidential","parliamentary","error","setError","navigate","fetchElections","res","get","headers","Authorization","localStorage","getItem","Array","isArray","data","err","console","fetchVoteStatus","handleLogout","removeItem","handleVoteClick","type","constituency","arguments","length","undefined","uniqueElections","seenTypes","Set","election","key","has","push","add","className","children","onClick","width","height","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","map","i","voted","disabled","Date","getFullYear"],"sources":["C:/Users/user/Desktop/Chain Choice/Chain Choice/voting frontend/src/pages/VoterDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport api from '../api/api';\n\nexport default function VoterDashboard() {\n  const [elections, setElections] = useState([]);\n  const [voteStatus, setVoteStatus] = useState({ presidential: false, parliamentary: [] });\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchElections = async () => {\n      try {\n        const res = await api.get('/api/votes/elections', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n        });\n        setElections(Array.isArray(res.data.elections) ? res.data.elections : []);\n      } catch (err) {\n        console.error('Error fetching elections:', err);\n        setError('Failed to load elections');\n      }\n    };\n\n    const fetchVoteStatus = async () => {\n      try {\n        const res = await api.get('/api/votes/status', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n        });\n        setVoteStatus(res.data);\n      } catch (err) {\n        setVoteStatus({ presidential: false, parliamentary: [] });\n      }\n    };\n\n    fetchElections();\n    fetchVoteStatus();\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('isAdmin');\n    navigate('/'); // Redirect to home page after logout\n  };\n\n  const handleVoteClick = (type, constituency = '') => {\n    if (type === 'presidential') {\n      navigate('/vote/presidential');\n    } else {\n      navigate(`/vote/parliamentary/${constituency}`);\n    }\n  };\n\n  // Filter to show only one Parliamentary Election card\n  const uniqueElections = [];\n  const seenTypes = new Set();\n  for (const election of elections) {\n    const key = election.type === 'parliamentary' ? 'parliamentary' : election.type;\n    if (!seenTypes.has(key)) {\n      uniqueElections.push(election);\n      seenTypes.add(key);\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-100 flex flex-col items-center py-10 px-2\">\n      <div className=\"w-full max-w-2xl bg-white rounded-2xl shadow-xl p-8\">\n        <div className=\"flex flex-col md:flex-row md:justify-between md:items-center mb-8\">\n          <div>\n            <h2 className=\"text-3xl font-extrabold text-blue-900 mb-1\">Welcome, Voter</h2>\n            <p className=\"text-gray-500 text-sm\">Your secure voting dashboard</p>\n          </div>\n          <button\n            onClick={handleLogout}\n            className=\"mt-4 md:mt-0 bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-semibold shadow transition\"\n          >\n            Logout\n          </button>\n        </div>\n\n        <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Available Elections</h3>\n\n        {error && <p className=\"text-red-600 mb-4\">{error}</p>}\n\n        {uniqueElections.length === 0 ? (\n          <div className=\"text-gray-500 text-center py-12\">\n            <svg className=\"mx-auto mb-2\" width=\"48\" height=\"48\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"#a0aec0\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            No elections available at the moment.\n          </div>\n        ) : (\n          <div className=\"space-y-5\">\n            {uniqueElections.map((election, i) => {\n              let voted = false;\n              if (election.type === 'presidential') {\n                voted = voteStatus.presidential;\n              } else if (election.type === 'parliamentary') {\n                voted = voteStatus.parliamentary && voteStatus.parliamentary.length > 0;\n              }\n              return (\n                <div\n                  key={i}\n                  className=\"flex flex-col md:flex-row md:justify-between md:items-center border rounded-xl shadow-sm p-5 bg-gradient-to-r from-blue-50 to-indigo-50\"\n                >\n                  <div className=\"mb-2 md:mb-0\">\n                    <span className=\"font-semibold text-lg text-blue-800\">\n                      {election.type === 'presidential'\n                        ? 'Presidential Election'\n                        : 'Parliamentary Election'}\n                    </span>\n                  </div>\n                  <button\n                    onClick={() =>\n                      handleVoteClick(election.type, election.constituency)\n                    }\n                    className={`px-6 py-2 rounded-lg font-bold shadow transition ${\n                      voted\n                        ? 'bg-gray-400 cursor-not-allowed'\n                        : 'bg-blue-600 hover:bg-indigo-700 text-white'\n                    }`}\n                    disabled={voted}\n                  >\n                    {voted ? 'Voted' : 'Vote'}\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n      <div className=\"mt-8 text-center text-gray-400 text-xs\">\n        &copy; {new Date().getFullYear()} National Online Voting System. All rights reserved.\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}